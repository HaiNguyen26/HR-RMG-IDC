# Quy Trรฌnh Cรดng Tรกc Phรญ - Flow Ngแบฏn Gแปn

## ๐ Tแปng Quan

Quy trรฌnh cรดng tรกc phรญ ฤฦฐแปฃc chia thรnh **2 flow riรชng biแปt** tรนy thuแปc vรo loแบกi ฤแปa ฤiแปm:

- ๐ **Trong nฦฐแปc (DOMESTIC)**: 2 bฦฐแปc phรช duyแปt (Cแบฅp 1 + Cแบฅp 2)
- ๐ซ **Ngoรi nฦฐแปc (INTERNATIONAL)**: 3 bฦฐแปc phรช duyแปt (Cแบฅp 1 + Cแบฅp 2 + CEO)

---

## ๐ FLOW CรNG TรC TRONG NฦฏแปC (DOMESTIC)

```
[1] Nhรขn viรชn tแบกo ฤฦกn
    โโ Chแปn "Trong nฦฐแปc"
    โโ Nhแบญp: Mแปฅc ฤรญch, ฤแปa ฤiแปm, Thแปi gian, Sแป tiแปn tแบกm แปฉng
    โโ Phแปฅ cแบฅp: 230,000 VND/ngรy (nแบฟu qua ฤรชm)
    โโ Trแบกng thรกi: Chแป duyแปt cแบฅp 1
          โ
          โ
[2] Quแบฃn lรฝ Trแปฑc tiแบฟp duyแปt
    โโ Duyแปt/Tแปซ chแปi vแปi ghi chรบ
    โโ Nแบฟu duyแปt:
          โ
          โ
    Trแบกng thรกi: Chแป duyแปt cแบฅp 2
          โ
          โ
[3] Giรกm ฤแปc Chi nhรกnh duyแปt
    โโ Duyแปt/Tแปซ chแปi vแปi ghi chรบ
    โโ Nแบฟu duyแปt:
          โ
          โ
    Trแบกng thรกi: Chแป xแปญ lรฝ tแบกm แปฉng โ
    (Bแป QUA bฦฐแปc CEO)
          โ
          โ
[4] HR xแปญ lรฝ tแบกm แปฉng
    โโ Xรกc nhแบญn/ฤiแปu chแปnh sแป tiแปn
    โโ Chแปn hรฌnh thแปฉc thanh toรกn
    โโ Trแบกng thรกi tแบกm แปฉng: Chแป kแบฟ toรกn xรกc nhแบญn
          โ
          โ
[5] Kแบฟ toรกn xรกc nhแบญn chuyแปn khoแบฃn
    โโ Thแปฑc hiแปn chuyแปn khoแบฃn
    โโ Trแบกng thรกi tแบกm แปฉng: ฤรฃ chuyแปn khoแบฃn
          โ
          โ
    Trแบกng thรกi: Chแป quyแบฟt toรกn
          โ
          โ
[6] Nhรขn viรชn submit bรกo cรกo hoรn แปฉng
    โโ Nhแบญp chi phรญ thแปฑc tแบฟ
    โโ Upload hรณa ฤฦกn/chแปฉng tแปซ
    โโ Trแบกng thรกi quyแบฟt toรกn: ฤรฃ gแปญi
          โ
          โ
[7] HR xรกc nhแบญn bรกo cรกo
    โโ Kiแปm tra tรญnh hแปฃp lแป
    โโ Trแบกng thรกi quyแบฟt toรกn: HR ฤรฃ xรกc nhแบญn
          โ
          โ
    Trแบกng thรกi: Chแป kแบฟ toรกn xแปญ lรฝ
          โ
          โ
[8] Kแบฟ toรกn kiแปm tra, quyแบฟt toรกn & giแบฃi ngรขn
    โโ ฤแปi chiแบฟu chi phรญ vs tแบกm แปฉng
    โโ Nแบฟu chi phรญ <= tแบกm แปฉng + ฤแบงy ฤแปง chแปฉng tแปซ:
    โ     โโ Giแบฃi ngรขn ngay
    โ     โโ Trแบกng thรกi: ฤรฃ hoรn tแบฅt โ
    โ
    โโ Nแบฟu chi phรญ > tแบกm แปฉng:
          โโ Trแบกng thรกi: Chแป phรช duyแปt ngoแบกi lแป
          โ     โ
          โ     โ
          โ [9] CEO phรช duyแปt ngoแบกi lแป
          โ     โโ Duyแปt/Tแปซ chแปi phแบงn vฦฐแปฃt
          โ     โโ Trแบกng thรกi: ฤรฃ hoรn tแบฅt
          โ           โ
          โ           โ
          โโโ Kแบฟ toรกn giแบฃi ngรขn โ
```

**Tรณm tแบฏt**: Nhรขn viรชn โ Quแบฃn lรฝ โ Giรกm ฤแปc Chi nhรกnh โ HR โ Kแบฟ toรกn โ Nhรขn viรชn bรกo cรกo โ HR xรกc nhแบญn โ Kแบฟ toรกn quyแบฟt toรกn & giแบฃi ngรขn

---

## ๐ซ FLOW CรNG TรC NGOรI NฦฏแปC (INTERNATIONAL)

```
[1] Nhรขn viรชn tแบกo ฤฦกn
    โโ Chแปn "Ngoรi nฦฐแปc"
    โโ Nhแบญp: Mแปฅc ฤรญch, ฤแปa ฤiแปm, Thแปi gian, Sแป tiแปn tแบกm แปฉng
    โโ Phแปฅ cแบฅp tแปฑ ฤแปng:
    โ     โโ Chรขu รu (EU): 60 USD/ngรy
    โ     โโ Chรขu ร (Asian): 40 USD/ngรy
    โโ Trแบกng thรกi: Chแป duyแปt cแบฅp 1
          โ
          โ
[2] Quแบฃn lรฝ Trแปฑc tiแบฟp duyแปt
    โโ Duyแปt/Tแปซ chแปi vแปi ghi chรบ
    โโ Nแบฟu duyแปt:
          โ
          โ
    Trแบกng thรกi: Chแป duyแปt cแบฅp 2
          โ
          โ
[3] Giรกm ฤแปc Chi nhรกnh duyแปt
    โโ Duyแปt/Tแปซ chแปi vแปi ghi chรบ
    โโ Nแบฟu duyแปt:
          โ
          โ
    Trแบกng thรกi: Chแป CEO duyแปt โ
          โ
          โ
[4] Tแปng Giรกm ฤแปc (CEO) duyแปt - BแบฎT BUแปC
    โโ Duyแปt/Tแปซ chแปi vแปi ghi chรบ
    โโ Nแบฟu duyแปt:
          โ
          โ
    Trแบกng thรกi: Chแป xแปญ lรฝ tแบกm แปฉng โ
          โ
          โ
[5] HR xแปญ lรฝ tแบกm แปฉng
    โโ Xรกc nhแบญn/ฤiแปu chแปnh sแป tiแปn
    โโ Chแปn hรฌnh thแปฉc thanh toรกn
    โโ Trแบกng thรกi tแบกm แปฉng: Chแป kแบฟ toรกn xรกc nhแบญn
          โ
          โ
[6] Kแบฟ toรกn xรกc nhแบญn chuyแปn khoแบฃn
    โโ Thแปฑc hiแปn chuyแปn khoแบฃn
    โโ Trแบกng thรกi tแบกm แปฉng: ฤรฃ chuyแปn khoแบฃn
          โ
          โ
    Trแบกng thรกi: Chแป quyแบฟt toรกn
          โ
          โ
[7] Nhรขn viรชn submit bรกo cรกo hoรn แปฉng
    โโ Nhแบญp chi phรญ thแปฑc tแบฟ
    โโ Upload hรณa ฤฦกn/chแปฉng tแปซ
    โโ Trแบกng thรกi quyแบฟt toรกn: ฤรฃ gแปญi
          โ
          โ
[8] HR xรกc nhแบญn bรกo cรกo
    โโ Kiแปm tra tรญnh hแปฃp lแป
    โโ Trแบกng thรกi quyแบฟt toรกn: HR ฤรฃ xรกc nhแบญn
          โ
          โ
    Trแบกng thรกi: Chแป kแบฟ toรกn xแปญ lรฝ
          โ
          โ
[9] Kแบฟ toรกn kiแปm tra, quyแบฟt toรกn & giแบฃi ngรขn
    โโ ฤแปi chiแบฟu chi phรญ vs tแบกm แปฉng
    โโ Nแบฟu chi phรญ <= tแบกm แปฉng + ฤแบงy ฤแปง chแปฉng tแปซ:
    โ     โโ Giแบฃi ngรขn ngay
    โ     โโ Trแบกng thรกi: ฤรฃ hoรn tแบฅt โ
    โ
    โโ Nแบฟu chi phรญ > tแบกm แปฉng:
          โโ Trแบกng thรกi: Chแป phรช duyแปt ngoแบกi lแป
          โ     โ
          โ     โ
          โ [10] CEO phรช duyแปt ngoแบกi lแป
          โ     โโ Duyแปt/Tแปซ chแปi phแบงn vฦฐแปฃt
          โ     โโ Trแบกng thรกi: ฤรฃ hoรn tแบฅt
          โ           โ
          โ           โ
          โโโ Kแบฟ toรกn giแบฃi ngรขn โ
```

**Tรณm tแบฏt**: Nhรขn viรชn โ Quแบฃn lรฝ โ Giรกm ฤแปc Chi nhรกnh โ **CEO** โ HR โ Kแบฟ toรกn โ Nhรขn viรชn bรกo cรกo โ HR xรกc nhแบญn โ Kแบฟ toรกn quyแบฟt toรกn & giแบฃi ngรขn

---

## ๐ So Sรกnh 2 Flow

| Tiรชu chรญ | Trong nฦฐแปc (DOMESTIC) | Ngoรi nฦฐแปc (INTERNATIONAL) |
|----------|----------------------|---------------------------|
| **Sแป bฦฐแปc phรช duyแปt** | 2 bฦฐแปc | 3 bฦฐแปc |
| **Bฦฐแปc phรช duyแปt** | Cแบฅp 1 + Cแบฅp 2 | Cแบฅp 1 + Cแบฅp 2 + **CEO** |
| **Phรช duyแปt CEO** | โ Khรดng cรณ | โ Bแบฏt buแปc (Bฦฐแปc 4) |
| **Trแบกng thรกi sau phรช duyแปt** | Chแป xแปญ lรฝ tแบกm แปฉng (tแปซ Cแบฅp 2) | Chแป xแปญ lรฝ tแบกm แปฉng (tแปซ CEO) |
| **Phแปฅ cแบฅp sinh hoแบกt** | 230,000 VND/ngรy<br>(nแบฟu qua ฤรชm) | EU: 60 USD/ngรy<br>Asian: 40 USD/ngรy |
| **Cรกc bฦฐแปc cรฒn lแบกi** | โ Giแปng nhau (Bฦฐแปc 5-9) | โ Giแปng nhau (Bฦฐแปc 5-10) |

---

## โ๏ธ Trฦฐแปng Hแปฃp ฤแบทc Biแปt

**Nแบฟu Quแบฃn lรฝ Trแปฑc tiแบฟp = Giรกm ฤแปc Chi nhรกnh:**

- **Trong nฦฐแปc**: Bแป qua bฦฐแปc Cแบฅp 2 โ Chuyแปn thแบณng `PENDING_FINANCE` sau Cแบฅp 1
- **Ngoรi nฦฐแปc**: Bแป qua bฦฐแปc Cแบฅp 2 โ Chuyแปn thแบณng `PENDING_CEO` sau Cแบฅp 1

---

## ๐ Luแปng Trแบกng Thรกi

### Trong nฦฐแปc (DOMESTIC):
```
Chแป duyแปt cแบฅp 1 โ Chแป duyแปt cแบฅp 2 โ Chแป xแปญ lรฝ tแบกm แปฉng โ 
Chแป quyแบฟt toรกn โ Chแป kแบฟ toรกn xแปญ lรฝ โ ฤรฃ hoรn tแบฅt
```

### Ngoรi nฦฐแปc (INTERNATIONAL):
```
Chแป duyแปt cแบฅp 1 โ Chแป duyแปt cแบฅp 2 โ Chแป CEO duyแปt โ 
Chแป xแปญ lรฝ tแบกm แปฉng โ Chแป quyแบฟt toรกn โ Chแป kแบฟ toรกn xแปญ lรฝ โ ฤรฃ hoรn tแบฅt
```

**Lฦฐu รฝ**: Nแบฟu chi phรญ > tแบกm แปฉng, sแบฝ cรณ thรชm "Chแป phรช duyแปt ngoแบกi lแป" trฦฐแปc khi "ฤรฃ hoรn tแบฅt".

---

## ๐ Cรกc Module Liรชn Quan

| Bฦฐแปc | Module | Route |
|------|--------|-------|
| 1. Tแบกo ฤฦกn | `TravelExpense` | `/travel-expense` |
| 2-3-4. Phรช duyแปt | `TravelExpenseApproval` | `/travel-expense-approval` |
| 4-5. HR xแปญ lรฝ tแบกm แปฉng | `TravelExpenseAdvanceProcessing` | `/travel-expense-advance-processing` |
| 5-6. Kแบฟ toรกn chuyแปn khoแบฃn | `TravelExpenseAccountant` (Tab "Tแบกm แปฉng") | `/travel-expense-accountant` |
| 6-7. Bรกo cรกo hoรn แปฉng | `TravelExpenseSettlement` | `/travel-expense-settlement` |
| 7-8. HR xรกc nhแบญn | `TravelExpenseManagement` | `/travel-expense-management` |
| 8-9. Quyแบฟt toรกn & giแบฃi ngรขn | `TravelExpenseAccountant` (Tab "Kiแปm tra") | `/travel-expense-accountant` |

---

## ๐ Bแบฃng Tra Cแปฉu Trแบกng Thรกi

| Trแบกng thรกi (Tiแบฟng Viแปt) | Trแบกng thรกi (Code) | Mรด tแบฃ |
|-------------------------|-------------------|-------|
| Chแป duyแปt cแบฅp 1 | `PENDING_LEVEL_1` | ฤฦกn mแปi tแบกo, chแป Quแบฃn lรฝ Trแปฑc tiแบฟp duyแปt |
| Chแป duyแปt cแบฅp 2 | `PENDING_LEVEL_2` | ฤรฃ ฤฦฐแปฃc Cแบฅp 1 duyแปt, chแป Giรกm ฤแปc Chi nhรกnh duyแปt |
| Chแป CEO duyแปt | `PENDING_CEO` | ฤรฃ ฤฦฐแปฃc Cแบฅp 2 duyแปt (ngoรi nฦฐแปc), chแป CEO duyแปt |
| Chแป xแปญ lรฝ tแบกm แปฉng | `PENDING_FINANCE` | ฤรฃ qua phรช duyแปt, chแป HR xแปญ lรฝ tแบกm แปฉng |
| Chแป quyแบฟt toรกn | `PENDING_SETTLEMENT` | ฤรฃ nhแบญn tแบกm แปฉng, chแป nhรขn viรชn submit bรกo cรกo |
| Chแป kแบฟ toรกn xแปญ lรฝ | `PENDING_ACCOUNTANT` | ฤรฃ submit bรกo cรกo, chแป kแบฟ toรกn quyแบฟt toรกn |
| Chแป phรช duyแปt ngoแบกi lแป | `PENDING_EXCEPTION_APPROVAL` | Chi phรญ vฦฐแปฃt ngรขn sรกch, chแป CEO phรช duyแปt |
| ฤรฃ hoรn tแบฅt | `SETTLED` | ฤรฃ hoรn tแบฅt toรn bแป quy trรฌnh |
| ฤรฃ tแปซ chแปi | `REJECTED` | ฤฦกn bแป tแปซ chแปi แป bแบฅt kแปณ bฦฐแปc nรo |

### Trแบกng thรกi Tแบกm แปฉng (advance_status):
- **Chแป kแบฟ toรกn xรกc nhแบญn** (`PENDING_ACCOUNTANT`): HR ฤรฃ xแปญ lรฝ, chแป kแบฟ toรกn chuyแปn khoแบฃn
- **ฤรฃ chuyแปn khoแบฃn** (`TRANSFERRED`): Kแบฟ toรกn ฤรฃ chuyแปn khoแบฃn tแบกm แปฉng

### Trแบกng thรกi Quyแบฟt toรกn (settlement_status):
- **ฤรฃ gแปญi** (`SUBMITTED`): Nhรขn viรชn ฤรฃ submit bรกo cรกo hoรn แปฉng
- **HR ฤรฃ xรกc nhแบญn** (`HR_CONFIRMED`): HR ฤรฃ xรกc nhแบญn bรกo cรกo hแปฃp lแป
